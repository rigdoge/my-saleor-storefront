# 项目要求与技术规范

## 基础信息

- **项目名称**: Saleor Storefront
- **版本**: 0.1.9
- **Saleor API 版本**: 3.20
- **框架**: Next.js 14.1.0

## 技术要求

### API 集成

- 使用 Saleor API 3.20 版本
- API 调用应自动生成，使用 GraphQL 代码生成工具
- 所有 GraphQL 查询必须与 Saleor API 3.20 版本兼容

### 代码规范

- 使用 TypeScript 进行类型检查
- 所有组件必须有明确的类型定义
- 客户端组件必须添加 `"use client"` 指令
- 避免使用隐式 `any` 类型

### URL 参数处理

- 使用 `useUrlParams` hook 处理 URL 参数
- 筛选条件、排序和分页应通过 URL 参数传递
- 确保 URL 参数与组件状态同步

### 组件设计

- 组件应遵循单一职责原则
- 共享组件应放在 `components/shared` 目录下
- UI 组件应放在 `components/ui` 目录下
- 业务组件应按功能分类放置

### 性能优化

- 使用 Next.js 的静态生成和服务器端渲染
- 实现图片懒加载和占位图
- 使用缓存减少重复请求

### 错误处理

- 所有 API 请求应有适当的错误处理
- 用户友好的错误提示
- 开发环境中提供详细错误信息

## 重要注意事项

1. **GraphQL 查询兼容性**: 确保所有 GraphQL 查询与 Saleor API 3.20 版本兼容，特别注意字段名称和参数。

2. **类型安全**: 所有组件和函数必须有明确的类型定义，避免使用 `any` 类型。

3. **客户端/服务器组件**: 使用 React hooks 的组件必须添加 `"use client"` 指令。

4. **URL 参数处理**: 使用 `useUrlParams` hook 处理 URL 参数，不要直接操作 URL。

5. **组件复用**: 避免创建重复的组件或功能，优先使用现有组件。

6. **国际化**: 所有用户界面文本应使用中文，但代码、变量名和注释应使用英文。

7. **响应式设计**: 确保所有页面在移动设备和桌面设备上都能正常显示。

8. **可访问性**: 遵循 Web 内容可访问性指南 (WCAG)。

9. **性能**: 优化加载时间和交互响应时间。

10. **测试**: 实现单元测试和集成测试。 